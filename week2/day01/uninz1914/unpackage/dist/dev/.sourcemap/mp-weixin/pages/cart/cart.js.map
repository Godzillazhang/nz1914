{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/main.js","webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue?b68b","webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue?7e76","webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue?56c0","webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue?2913","webpack:///C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue"],"names":["createPage","Page","data","flag","cartlist","computed","totalNum","map","item","num","totalPrice","price","onLoad","console","log","onShow","userid","uni","getStorageSync","token","url","then","res","code","title","navigateTo","e","methods","reduce","cartid","add","del","index","splice","length"],"mappings":"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","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=6cfbe5ad&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6cfbe5ad')) {\n      api.createRecord('6cfbe5ad', component.options)\n    } else {\n      api.reload('6cfbe5ad', component.options)\n    }\n    module.hot.accept(\"./cart.vue?vue&type=template&id=6cfbe5ad&\", function () {\n      api.rerender('6cfbe5ad', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/code/week2/day01/uninz1914/pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=template&id=6cfbe5ad&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import { request, toast } from '../../utils/index.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tflag: true,\n        cartlist: []\n\t\t\t}\n\t\t},\n    computed: {\n      totalNum () {\n        let totalNum = 0;\n        this.cartlist.map(item => {\n          totalNum += item.num\n        })\n        return totalNum\n      },\n      totalPrice () {\n        let totalPrice = 0;\n        this.cartlist.map(item => {\n          totalPrice += item.num * item.price\n        })\n        return totalPrice\n      }\n    },\n    onLoad () {\n      console.log('onLoad')\n    },\n    onShow () { // 不使用 onLoad 以及 mounted 是因为页面被缓存，数据更新不及时\n      console.log('onShow')\n      try{\n        let userid = uni.getStorageSync('userid')\n        let token = uni.getStorageSync('token')\n        if (userid && token) {\n          request({\n            url: '/cart',\n            data: {\n              userid, token\n            }\n          }).then(res => {\n            if (res.data.code === '10019') {\n              toast({title:'请先登录'})\n              uni.navigateTo({\n                url: '/pages/login/login'\n              })\n            } else if (res.data.code === '10012') {\n              toast({title:'请先选购商品'})\n              this.flag = true\n            } else {\n              toast({title:'购物车列表获取成功'})\n              this.flag = false\n              this.cartlist = res.data.data\n            }\n          })\n        } else {\n          toast({title:'请先登录'})\n          uni.navigateTo({\n            url: '/pages/login/login'\n          })\n        }\n      }catch(e){\n        //TODO handle the exception\n      }\n      \n      \n    },\n\t\tmethods: {\n\t\t\treduce (item) {\n        // 如果当前的个数为1 不操作，如果大于1减1操作\n        let num = item.num\n        if (num > 1) {\n          num -= 1\n        } else {\n          num = 1\n        }\n        let token = uni.getStorageSync('token')\n        request({\n          url: '/cart/update',\n          data: {\n            token,\n            cartid: item.cartid, // item包含购物车记录id\n            num\n          }\n        }).then(res => {\n          if (res.data.code === '10019') {\n            toast({title:'请先登录'})\n            uni.navigateTo({\n              url: '/pages/login/login'\n            })\n          } else {\n            toast({title:'修改数量成功'})\n            item.num -= 1 // 服务器返回成功之后  视图才更新\n          }\n        })\n      },\n      add (item) {\n        // item.num += 1\n        // 加1\n        let num = item.num\n        num += 1\n        let token = uni.getStorageSync('token')\n        request({\n          url: '/cart/update',\n          data: {\n            token,\n            cartid: item.cartid, // item包含购物车记录id\n            num\n          }\n        }).then(res => {\n          if (res.data.code === '10019') {\n            toast({title:'请先登录'})\n            uni.navigateTo({\n              url: '/pages/login/login'\n            })\n          } else {\n            toast({title:'修改数量成功'})\n            item.num += 1 // 服务器返回成功之后  视图才更新\n          }\n        })\n      },\n      del (item,index) {\n        let token = uni.getStorageSync('token')\n        request({\n          url: '/cart/delete',\n          data: {\n            token,\n            cartid: item.cartid\n          }\n        }).then(res => {\n          if (res.data.code === '10019') {\n            toast({title:'请先登录'})\n            uni.navigateTo({\n              url: '/pages/login/login'\n            })\n          } else {\n            toast({title:'删除数据成功'})\n            this.cartlist.splice(index, 1) // 删除当前的数据\n            // 如果点击删除 删完之后要显示没有数据了\n            this.cartlist.length === 0 ? this.flag = true : this.flag = false\n          }\n        })\n      }\n\t\t}\n\t}\n"],"sourceRoot":""}